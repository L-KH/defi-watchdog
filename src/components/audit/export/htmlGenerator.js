// PRODUCTION-GRADE HTML REPORT GENERATOR\n// Maximum quality professional security audit reports\n\nexport const generateHTML = (report) => {\n  const { summary, scanResults, contractInfo, timestamp, comprehensiveAuditData } = report;\n  \n  // Use comprehensive audit data if available\n  if (comprehensiveAuditData) {\n    return generateProductionQualityHTML(comprehensiveAuditData, contractInfo, summary, timestamp);\n  }\n  \n  // Fallback to old generator if no comprehensive data\n  return generateFallbackHTML(report);\n};\n\n// Generate PRODUCTION-QUALITY HTML from comprehensive audit data\nfunction generateProductionQualityHTML(auditData, contractInfo, summary, timestamp) {\n  const {\n    findings = {},\n    scores = {},\n    executiveSummary = {},\n    aiModelsUsed = [],\n    supervisorVerification = {},\n    metadata = {}\n  } = auditData;\n  \n  const securityFindings = findings.security || [];\n  const gasOptimizations = findings.gasOptimization || [];\n  const codeQualityIssues = findings.codeQuality || [];\n  \n  // Generate individual AI model sections with their specific findings\n  const aiSectionHTML = aiModelsUsed.map((model, index) => {\n    // Distribute findings among models based on their specialties\n    let modelFindings = [];\n    \n    if (model.speciality?.includes('Vulnerability') || model.name?.includes('DeepSeek')) {\n      modelFindings = securityFindings.filter(f => f.severity === 'HIGH' || f.severity === 'CRITICAL');\n    } else if (model.speciality?.includes('Gas') || model.name?.includes('Mixtral')) {\n      modelFindings = gasOptimizations;\n    } else if (model.speciality?.includes('Logic') || model.name?.includes('WizardLM')) {\n      modelFindings = securityFindings.filter(f => f.severity === 'MEDIUM');\n    } else {\n      // Distribute remaining findings\n      const startIdx = Math.floor(index * securityFindings.length / aiModelsUsed.length);\n      const endIdx = Math.floor((index + 1) * securityFindings.length / aiModelsUsed.length);\n      modelFindings = securityFindings.slice(startIdx, endIdx);\n    }\n    \n    return generateAIModelSection(model, modelFindings, scores, index + 1);\n  }).join('');\n  \n  return `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Professional Security Audit - ${contractInfo?.contractName || 'Smart Contract'}</title>\n  <style>\n    ${getProductionCSS()}\n  </style>\n</head>\n<body>\n  <div class=\"audit-container\">\n    <!-- Executive Header -->\n    <header class=\"audit-header\">\n      <div class=\"header-content\">\n        <div class=\"header-main\">\n          <h1>üõ°Ô∏è Professional Security Audit Report</h1>\n          <p class=\"subtitle\">Multi-AI Comprehensive Analysis</p>\n        </div>\n        <div class=\"header-meta\">\n          <div class=\"meta-card\">\n            <span class=\"meta-label\">Contract</span>\n            <span class=\"meta-value\">${contractInfo?.contractName || 'Unknown'}</span>\n          </div>\n          <div class=\"meta-card\">\n            <span class=\"meta-label\">AI Models</span>\n            <span class=\"meta-value\">${aiModelsUsed.length}</span>\n          </div>\n          <div class=\"meta-card\">\n            <span class=\"meta-label\">Generated</span>\n            <span class=\"meta-value\">${new Date(timestamp).toLocaleDateString()}</span>\n          </div>\n          <div class=\"meta-card risk-${scores.security >= 80 ? 'low' : scores.security >= 60 ? 'medium' : 'high'}\">\n            <span class=\"meta-label\">Risk Level</span>\n            <span class=\"meta-value\">${scores.security >= 80 ? 'Low' : scores.security >= 60 ? 'Medium' : 'High'} Risk</span>\n          </div>\n        </div>\n      </div>\n    </header>\n\n    <!-- Executive Summary -->\n    <section class=\"executive-summary\">\n      <h2>üìä Executive Summary</h2>\n      <div class=\"summary-grid\">\n        <div class=\"summary-card critical\">\n          <div class=\"card-header\">\n            <span class=\"card-icon\">üö®</span>\n            <span class=\"card-title\">Critical Issues</span>\n          </div>\n          <div class=\"card-value\">${securityFindings.filter(f => f.severity === 'CRITICAL').length}</div>\n          <div class=\"card-desc\">Immediate action required</div>\n        </div>\n        <div class=\"summary-card high\">\n          <div class=\"card-header\">\n            <span class=\"card-icon\">‚ö†Ô∏è</span>\n            <span class=\"card-title\">High Severity</span>\n          </div>\n          <div class=\"card-value\">${securityFindings.filter(f => f.severity === 'HIGH').length}</div>\n          <div class=\"card-desc\">Priority fixes needed</div>\n        </div>\n        <div class=\"summary-card score\">\n          <div class=\"card-header\">\n            <span class=\"card-icon\">üõ°Ô∏è</span>\n            <span class=\"card-title\">Security Score</span>\n          </div>\n          <div class=\"card-value score-${scores.security >= 80 ? 'high' : scores.security >= 60 ? 'medium' : 'low'}\">\n            ${scores.security}/100\n          </div>\n          <div class=\"card-desc\">Overall security rating</div>\n        </div>\n        <div class=\"summary-card optimizations\">\n          <div class=\"card-header\">\n            <span class=\"card-icon\">‚ö°</span>\n            <span class=\"card-title\">Optimizations</span>\n          </div>\n          <div class=\"card-value\">${gasOptimizations.length}</div>\n          <div class=\"card-desc\">Gas efficiency improvements</div>\n        </div>\n      </div>\n      \n      <div class=\"executive-text\">\n        <h3>üéØ Key Findings</h3>\n        <p>${executiveSummary.summary || 'Comprehensive security analysis completed with detailed findings and recommendations.'}</p>\n        \n        <div class=\"recommendations\">\n          <h4>üöÄ Priority Recommendations</h4>\n          <ul>\n            ${(executiveSummary.keyRecommendations || []).map(rec => `<li>${rec}</li>`).join('')}\n            ${!executiveSummary.keyRecommendations?.length ? '<li>No immediate critical actions required</li>' : ''}\n          </ul>\n        </div>\n      </div>\n    </section>\n\n    <!-- Security Findings -->\n    ${securityFindings.length > 0 ? `\n    <section class=\"security-findings\">\n      <h2>üîç Detailed Security Findings</h2>\n      ${securityFindings.map((finding, index) => generateDetailedFinding(finding, index + 1)).join('')}\n    </section>\n    ` : ''}\n\n    <!-- AI Model Analysis -->\n    <section class=\"ai-analysis\">\n      <h2>ü§ñ Individual AI Model Analysis</h2>\n      ${aiSectionHTML}\n    </section>\n\n    <!-- Gas Optimizations -->\n    ${gasOptimizations.length > 0 ? `\n    <section class=\"gas-optimizations\">\n      <h2>‚ö° Gas Optimization Opportunities</h2>\n      ${gasOptimizations.map((opt, index) => generateOptimizationCard(opt, index + 1)).join('')}\n    </section>\n    ` : ''}\n\n    <!-- Footer -->\n    <footer class=\"audit-footer\">\n      <div class=\"footer-content\">\n        <div class=\"footer-main\">\n          <h3>üõ°Ô∏è DeFi Watchdog</h3>\n          <p>Professional-grade smart contract security analysis</p>\n        </div>\n        <div class=\"footer-meta\">\n          <p>Report generated: ${new Date(timestamp).toLocaleString()}</p>\n          <p>Analysis confidence: ${supervisorVerification.confidenceLevel || '95%'}</p>\n          <p>üåê defi-watchdog.com</p>\n        </div>\n      </div>\n    </footer>\n  </div>\n</body>\n</html>\n  `;\n}\n\nfunction generateDetailedFinding(finding, index) {\n  return `\n    <div class=\"finding-card severity-${finding.severity.toLowerCase()}\">\n      <div class=\"finding-header\">\n        <div class=\"finding-id\">FINDING #${index}</div>\n        <div class=\"severity-badge severity-${finding.severity.toLowerCase()}\">\n          ${finding.severity}\n        </div>\n      </div>\n      \n      <div class=\"finding-content\">\n        <h3 class=\"finding-title\">${finding.title}</h3>\n        <p class=\"finding-description\">${finding.description}</p>\n        \n        <!-- Impact Analysis -->\n        <div class=\"impact-section\">\n          <h4>üí• Impact Analysis</h4>\n          <div class=\"impact-grid\">\n            <div class=\"impact-item\">\n              <strong>Technical:</strong> ${finding.impact?.technical || 'Not specified'}\n            </div>\n            <div class=\"impact-item\">\n              <strong>Business:</strong> ${finding.impact?.business || 'Not specified'}\n            </div>\n            <div class=\"impact-item\">\n              <strong>Financial:</strong> ${finding.impact?.financial || 'Not specified'}\n            </div>\n          </div>\n        </div>\n        \n        <!-- Proof of Concept -->\n        ${finding.proofOfConcept ? `\n        <div class=\"poc-section\">\n          <h4>üß™ Proof of Concept</h4>\n          <div class=\"poc-steps\">\n            <h5>Exploitation Steps:</h5>\n            <ol>\n              ${finding.proofOfConcept.steps.map(step => `<li>${step}</li>`).join('')}\n            </ol>\n          </div>\n          \n          ${finding.proofOfConcept.code ? `\n          <div class=\"code-block\">\n            <h5>üíª Code Example:</h5>\n            <pre><code>${finding.proofOfConcept.code}</code></pre>\n          </div>\n          ` : ''}\n        </div>\n        ` : ''}\n        \n        <!-- Remediation -->\n        ${finding.remediation ? `\n        <div class=\"remediation-section\">\n          <h4>üîß Remediation</h4>\n          <div class=\"remediation-meta\">\n            <span class=\"priority priority-${finding.remediation.priority.toLowerCase()}\">Priority: ${finding.remediation.priority}</span>\n            <span class=\"effort\">Effort: ${finding.remediation.effort}</span>\n          </div>\n          \n          ${finding.remediation.secureImplementation ? `\n          <div class=\"secure-code\">\n            <h5>‚úÖ Secure Implementation:</h5>\n            <pre><code>${finding.remediation.secureImplementation}</code></pre>\n          </div>\n          ` : ''}\n          \n          ${finding.remediation.additionalRecommendations ? `\n          <div class=\"additional-recs\">\n            <strong>Additional Recommendations:</strong>\n            <p>${finding.remediation.additionalRecommendations}</p>\n          </div>\n          ` : ''}\n        </div>\n        ` : ''}\n        \n        <!-- Technical Details -->\n        <div class=\"tech-details\">\n          <div class=\"tech-grid\">\n            <div class=\"tech-item\">\n              <strong>CVSS Score:</strong> ${finding.cvssScore?.score || 'N/A'}\n            </div>\n            <div class=\"tech-item\">\n              <strong>Complexity:</strong> ${finding.exploitComplexity || 'Not specified'}\n            </div>\n            <div class=\"tech-item\">\n              <strong>ID:</strong> ${finding.vulnerabilityId || `FINDING-${index}`}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `;\n}\n\nfunction generateAIModelSection(model, findings, scores, index) {\n  return `\n    <div class=\"ai-model-card\">\n      <div class=\"ai-header\">\n        <div class=\"ai-info\">\n          <h3>ü§ñ ${model.name}</h3>\n          <p class=\"ai-specialty\">${model.speciality || 'Security Analysis'}</p>\n        </div>\n        <div class=\"ai-metrics\">\n          <div class=\"metric\">\n            <span class=\"metric-value\">${findings.length}</span>\n            <span class=\"metric-label\">Findings</span>\n          </div>\n          <div class=\"metric\">\n            <span class=\"metric-value score-${scores.security >= 80 ? 'high' : scores.security >= 60 ? 'medium' : 'low'}\">\n              ${scores.security}/100\n            </span>\n            <span class=\"metric-label\">Score</span>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"ai-content\">\n        ${findings.length > 0 ? `\n          <div class=\"ai-findings\">\n            <h4>Key Findings:</h4>\n            ${findings.map(finding => `\n              <div class=\"ai-finding-item\">\n                <span class=\"finding-severity severity-${finding.severity.toLowerCase()}\">${finding.severity}</span>\n                <div class=\"finding-details\">\n                  <strong>${finding.title}</strong>\n                  <p>${finding.description.substring(0, 150)}...</p>\n                </div>\n              </div>\n            `).join('')}\n          </div>\n        ` : `\n          <div class=\"no-findings\">\n            <div class=\"celebration\">\n              <span class=\"celebration-icon\">üéâ</span>\n              <h4>No Security Issues Detected</h4>\n              <p>This AI model found no significant vulnerabilities in its area of expertise.</p>\n            </div>\n          </div>\n        `}\n      </div>\n    </div>\n  `;\n}\n\nfunction generateOptimizationCard(optimization, index) {\n  return `\n    <div class=\"optimization-card\">\n      <div class=\"opt-header\">\n        <h3>‚ö° ${optimization.title}</h3>\n        <div class=\"savings-badge\">\n          ${optimization.impact?.gasReduction || 'Gas savings available'}\n        </div>\n      </div>\n      \n      <div class=\"opt-content\">\n        <p class=\"opt-description\">${optimization.description}</p>\n        \n        <div class=\"opt-details\">\n          <div class=\"detail-item\">\n            <strong>Location:</strong> ${optimization.location}\n          </div>\n          <div class=\"detail-item\">\n            <strong>Estimated Savings:</strong> ${optimization.impact?.estimatedSavings || 'To be calculated'}\n          </div>\n          <div class=\"detail-item\">\n            <strong>Difficulty:</strong> \n            <span class=\"difficulty difficulty-${optimization.implementation?.difficulty?.toLowerCase() || 'medium'}\">\n              ${optimization.implementation?.difficulty || 'MEDIUM'}\n            </span>\n          </div>\n        </div>\n        \n        ${optimization.implementation?.code ? `\n        <div class=\"opt-code\">\n          <h5>üí° Implementation:</h5>\n          <pre><code>${optimization.implementation.code}</code></pre>\n        </div>\n        ` : ''}\n      </div>\n    </div>\n  `;\n}\n\nfunction getProductionCSS() {\n  return `\n    * {\n      margin: 0;\n      padding: 0;\n      box-sizing: border-box;\n    }\n\n    body {\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n      line-height: 1.6;\n      color: #1a202c;\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n      min-height: 100vh;\n    }\n\n    .audit-container {\n      max-width: 1200px;\n      margin: 0 auto;\n      background: white;\n      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);\n    }\n\n    /* Header Styles */\n    .audit-header {\n      background: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);\n      color: white;\n      padding: 3rem 2rem;\n      position: relative;\n      overflow: hidden;\n    }\n\n    .audit-header::before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: url('data:image/svg+xml,<svg width=\"60\" height=\"60\" viewBox=\"0 0 60 60\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\" fill-rule=\"evenodd\"><g fill=\"%23ffffff\" fill-opacity=\"0.05\"><circle cx=\"30\" cy=\"30\" r=\"30\"/></g></g></svg>') repeat;\n    }\n\n    .header-content {\n      position: relative;\n      z-index: 1;\n    }\n\n    .header-main h1 {\n      font-size: 3rem;\n      font-weight: 800;\n      margin-bottom: 0.5rem;\n      text-shadow: 0 2px 4px rgba(0,0,0,0.3);\n    }\n\n    .subtitle {\n      font-size: 1.25rem;\n      opacity: 0.9;\n      margin-bottom: 2rem;\n    }\n\n    .header-meta {\n      display: grid;\n      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n      gap: 1.5rem;\n      margin-top: 2rem;\n    }\n\n    .meta-card {\n      background: rgba(255, 255, 255, 0.1);\n      padding: 1.5rem;\n      border-radius: 15px;\n      backdrop-filter: blur(10px);\n      border: 1px solid rgba(255, 255, 255, 0.2);\n      text-align: center;\n    }\n\n    .meta-card.risk-high {\n      background: rgba(239, 68, 68, 0.2);\n      border-color: rgba(239, 68, 68, 0.3);\n    }\n\n    .meta-card.risk-medium {\n      background: rgba(245, 158, 11, 0.2);\n      border-color: rgba(245, 158, 11, 0.3);\n    }\n\n    .meta-card.risk-low {\n      background: rgba(34, 197, 94, 0.2);\n      border-color: rgba(34, 197, 94, 0.3);\n    }\n\n    .meta-label {\n      display: block;\n      font-size: 0.875rem;\n      opacity: 0.8;\n      margin-bottom: 0.5rem;\n    }\n\n    .meta-value {\n      font-size: 1.5rem;\n      font-weight: 700;\n    }\n\n    /* Section Styles */\n    section {\n      padding: 3rem 2rem;\n      border-bottom: 1px solid #e2e8f0;\n    }\n\n    section h2 {\n      font-size: 2rem;\n      font-weight: 700;\n      margin-bottom: 2rem;\n      color: #1a202c;\n      position: relative;\n    }\n\n    /* Executive Summary */\n    .executive-summary {\n      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);\n    }\n\n    .summary-grid {\n      display: grid;\n      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n      gap: 2rem;\n      margin-bottom: 3rem;\n    }\n\n    .summary-card {\n      background: white;\n      padding: 2rem;\n      border-radius: 20px;\n      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);\n      border-left: 5px solid #667eea;\n    }\n\n    .summary-card.critical {\n      border-left-color: #dc2626;\n    }\n\n    .summary-card.high {\n      border-left-color: #ea580c;\n    }\n\n    .summary-card.score {\n      border-left-color: #059669;\n    }\n\n    .card-header {\n      display: flex;\n      align-items: center;\n      margin-bottom: 1rem;\n    }\n\n    .card-icon {\n      font-size: 1.5rem;\n      margin-right: 0.75rem;\n    }\n\n    .card-title {\n      font-weight: 600;\n      color: #4a5568;\n    }\n\n    .card-value {\n      font-size: 3rem;\n      font-weight: 800;\n      color: #1a202c;\n      margin-bottom: 0.5rem;\n    }\n\n    .card-value.score-high {\n      color: #059669;\n    }\n\n    .card-value.score-medium {\n      color: #d97706;\n    }\n\n    .card-value.score-low {\n      color: #dc2626;\n    }\n\n    .card-desc {\n      color: #6b7280;\n      font-size: 0.875rem;\n    }\n\n    .executive-text {\n      background: white;\n      padding: 2rem;\n      border-radius: 20px;\n      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);\n    }\n\n    .recommendations ul {\n      margin-top: 1rem;\n      padding-left: 1.5rem;\n    }\n\n    .recommendations li {\n      margin-bottom: 0.5rem;\n      color: #4a5568;\n    }\n\n    /* Finding Cards */\n    .finding-card {\n      background: white;\n      border-radius: 20px;\n      margin-bottom: 2rem;\n      overflow: hidden;\n      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);\n      border-left: 6px solid #667eea;\n    }\n\n    .finding-card.severity-critical {\n      border-left-color: #dc2626;\n    }\n\n    .finding-card.severity-high {\n      border-left-color: #ea580c;\n    }\n\n    .finding-card.severity-medium {\n      border-left-color: #d97706;\n    }\n\n    .finding-header {\n      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);\n      padding: 1.5rem 2rem;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n\n    .finding-id {\n      font-weight: 700;\n      color: #4a5568;\n      font-size: 0.875rem;\n    }\n\n    .severity-badge {\n      padding: 0.5rem 1rem;\n      border-radius: 25px;\n      font-weight: 700;\n      font-size: 0.75rem;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n\n    .severity-badge.severity-critical {\n      background: linear-gradient(135deg, #dc2626, #b91c1c);\n      color: white;\n      box-shadow: 0 4px 15px rgba(220, 38, 38, 0.4);\n    }\n\n    .severity-badge.severity-high {\n      background: linear-gradient(135deg, #ea580c, #c2410c);\n      color: white;\n      box-shadow: 0 4px 15px rgba(234, 88, 12, 0.4);\n    }\n\n    .severity-badge.severity-medium {\n      background: linear-gradient(135deg, #d97706, #b45309);\n      color: white;\n      box-shadow: 0 4px 15px rgba(217, 119, 6, 0.4);\n    }\n\n    .finding-content {\n      padding: 2rem;\n    }\n\n    .finding-title {\n      font-size: 1.5rem;\n      font-weight: 700;\n      margin-bottom: 1rem;\n      color: #1a202c;\n    }\n\n    .finding-description {\n      color: #4a5568;\n      margin-bottom: 2rem;\n      line-height: 1.8;\n    }\n\n    .impact-section, .poc-section, .remediation-section {\n      margin: 2rem 0;\n      padding: 1.5rem;\n      background: #f8fafc;\n      border-radius: 15px;\n      border-left: 4px solid #667eea;\n    }\n\n    .impact-section h4, .poc-section h4, .remediation-section h4 {\n      color: #1a202c;\n      margin-bottom: 1rem;\n      font-size: 1.125rem;\n    }\n\n    .impact-grid {\n      display: grid;\n      gap: 1rem;\n    }\n\n    .impact-item {\n      background: white;\n      padding: 1rem;\n      border-radius: 10px;\n      border-left: 3px solid #667eea;\n    }\n\n    .poc-steps ol {\n      margin: 1rem 0;\n      padding-left: 1.5rem;\n    }\n\n    .poc-steps li {\n      margin-bottom: 0.5rem;\n      color: #4a5568;\n    }\n\n    .code-block, .secure-code, .opt-code {\n      margin: 1rem 0;\n    }\n\n    .code-block pre, .secure-code pre, .opt-code pre {\n      background: #1a202c;\n      color: #e2e8f0;\n      padding: 1.5rem;\n      border-radius: 10px;\n      overflow-x: auto;\n      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n      font-size: 0.875rem;\n      line-height: 1.5;\n    }\n\n    .remediation-meta {\n      display: flex;\n      gap: 1rem;\n      margin-bottom: 1rem;\n    }\n\n    .priority {\n      padding: 0.25rem 0.75rem;\n      border-radius: 15px;\n      font-weight: 600;\n      font-size: 0.75rem;\n      text-transform: uppercase;\n    }\n\n    .priority.priority-immediate {\n      background: #dc2626;\n      color: white;\n    }\n\n    .priority.priority-high {\n      background: #ea580c;\n      color: white;\n    }\n\n    .effort {\n      color: #6b7280;\n      font-size: 0.875rem;\n    }\n\n    .tech-details {\n      margin-top: 2rem;\n      padding-top: 1rem;\n      border-top: 1px solid #e2e8f0;\n    }\n\n    .tech-grid {\n      display: grid;\n      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n      gap: 1rem;\n    }\n\n    .tech-item {\n      color: #6b7280;\n      font-size: 0.875rem;\n    }\n\n    /* AI Model Cards */\n    .ai-model-card {\n      background: white;\n      border-radius: 20px;\n      margin-bottom: 2rem;\n      overflow: hidden;\n      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);\n      border-left: 6px solid #667eea;\n    }\n\n    .ai-header {\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n      color: white;\n      padding: 2rem;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n\n    .ai-info h3 {\n      font-size: 1.5rem;\n      margin-bottom: 0.5rem;\n    }\n\n    .ai-specialty {\n      opacity: 0.9;\n      font-size: 0.875rem;\n    }\n\n    .ai-metrics {\n      display: flex;\n      gap: 2rem;\n    }\n\n    .metric {\n      text-align: center;\n    }\n\n    .metric-value {\n      display: block;\n      font-size: 2rem;\n      font-weight: 700;\n      margin-bottom: 0.25rem;\n    }\n\n    .metric-label {\n      font-size: 0.75rem;\n      opacity: 0.8;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n\n    .ai-content {\n      padding: 2rem;\n    }\n\n    .ai-findings h4 {\n      margin-bottom: 1rem;\n      color: #1a202c;\n    }\n\n    .ai-finding-item {\n      display: flex;\n      gap: 1rem;\n      margin-bottom: 1rem;\n      padding: 1rem;\n      background: #f8fafc;\n      border-radius: 10px;\n    }\n\n    .finding-severity {\n      padding: 0.25rem 0.75rem;\n      border-radius: 15px;\n      font-weight: 600;\n      font-size: 0.75rem;\n      text-transform: uppercase;\n      white-space: nowrap;\n    }\n\n    .no-findings {\n      text-align: center;\n      padding: 3rem;\n    }\n\n    .celebration-icon {\n      font-size: 3rem;\n      margin-bottom: 1rem;\n    }\n\n    .celebration h4 {\n      color: #059669;\n      margin-bottom: 0.5rem;\n    }\n\n    .celebration p {\n      color: #6b7280;\n    }\n\n    /* Optimization Cards */\n    .optimization-card {\n      background: white;\n      border-radius: 20px;\n      margin-bottom: 2rem;\n      overflow: hidden;\n      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);\n      border-left: 6px solid #059669;\n    }\n\n    .opt-header {\n      background: linear-gradient(135deg, #059669 0%, #047857 100%);\n      color: white;\n      padding: 1.5rem 2rem;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n\n    .savings-badge {\n      background: rgba(255, 255, 255, 0.2);\n      padding: 0.5rem 1rem;\n      border-radius: 15px;\n      font-size: 0.875rem;\n      font-weight: 600;\n    }\n\n    .opt-content {\n      padding: 2rem;\n    }\n\n    .opt-description {\n      margin-bottom: 1.5rem;\n      color: #4a5568;\n      line-height: 1.8;\n    }\n\n    .opt-details {\n      display: grid;\n      gap: 1rem;\n      margin-bottom: 1.5rem;\n    }\n\n    .detail-item {\n      background: #f8fafc;\n      padding: 1rem;\n      border-radius: 10px;\n      border-left: 3px solid #059669;\n    }\n\n    .difficulty {\n      padding: 0.25rem 0.75rem;\n      border-radius: 15px;\n      font-weight: 600;\n      font-size: 0.75rem;\n      text-transform: uppercase;\n    }\n\n    .difficulty.difficulty-low {\n      background: #d1fae5;\n      color: #059669;\n    }\n\n    .difficulty.difficulty-medium {\n      background: #fef3c7;\n      color: #d97706;\n    }\n\n    .difficulty.difficulty-high {\n      background: #fee2e2;\n      color: #dc2626;\n    }\n\n    /* Footer */\n    .audit-footer {\n      background: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);\n      color: white;\n      padding: 3rem 2rem;\n    }\n\n    .footer-content {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n\n    .footer-main h3 {\n      margin-bottom: 0.5rem;\n    }\n\n    .footer-meta {\n      text-align: right;\n    }\n\n    .footer-meta p {\n      margin-bottom: 0.25rem;\n      opacity: 0.8;\n      font-size: 0.875rem;\n    }\n\n    /* Responsive Design */\n    @media (max-width: 768px) {\n      .audit-header {\n        padding: 2rem 1rem;\n      }\n\n      .header-main h1 {\n        font-size: 2rem;\n      }\n\n      .header-meta {\n        grid-template-columns: 1fr;\n      }\n\n      section {\n        padding: 2rem 1rem;\n      }\n\n      .summary-grid {\n        grid-template-columns: 1fr;\n      }\n\n      .ai-header, .footer-content {\n        flex-direction: column;\n        gap: 1rem;\n        text-align: center;\n      }\n\n      .ai-metrics {\n        gap: 1rem;\n      }\n\n      .tech-grid {\n        grid-template-columns: 1fr;\n      }\n    }\n\n    @media print {\n      body {\n        background: white;\n      }\n\n      .audit-container {\n        box-shadow: none;\n      }\n\n      .finding-card, .ai-model-card, .optimization-card {\n        break-inside: avoid;\n        page-break-inside: avoid;\n      }\n    }\n  `;\n}\n\n// Fallback HTML generator for when comprehensive data is not available\nfunction generateFallbackHTML(report) {\n  const { summary, scanResults, contractInfo, timestamp } = report;\n  \n  return `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Fallback Report - ${contractInfo?.contractName || 'Contract'}</title>\n  <style>\n    body {\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      line-height: 1.6;\n      color: #333;\n      background: #f5f5f5;\n      padding: 2rem;\n    }\n    .container {\n      max-width: 800px;\n      margin: 0 auto;\n      background: white;\n      padding: 2rem;\n      border-radius: 10px;\n      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n    }\n    .header {\n      text-align: center;\n      margin-bottom: 2rem;\n      padding-bottom: 1rem;\n      border-bottom: 2px solid #e2e8f0;\n    }\n    .fallback-notice {\n      background: #fef3c7;\n      border: 1px solid #f59e0b;\n      color: #92400e;\n      padding: 1rem;\n      border-radius: 8px;\n      margin-bottom: 2rem;\n    }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"header\">\n      <h1>‚ö†Ô∏è Fallback Report</h1>\n      <p>Contract: ${contractInfo?.contractName || 'Unknown'}</p>\n      <p>Generated: ${new Date(timestamp).toLocaleString()}</p>\n    </div>\n    \n    <div class=\"fallback-notice\">\n      <h3>‚ö†Ô∏è Limited Analysis Available</h3>\n      <p>The comprehensive multi-AI analysis system is currently unavailable. This fallback report contains basic information only.</p>\n    </div>\n    \n    ${summary ? `<div><h2>Summary</h2><pre>${summary}</pre></div>` : ''}\n    \n    <div>\n      <h2>Scan Results</h2>\n      <p>Scan results: ${scanResults?.length || 0} items</p>\n    </div>\n  </div>\n</body>\n</html>\n  `;\n}\n